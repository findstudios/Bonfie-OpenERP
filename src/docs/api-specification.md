# API è¦æ ¼æ–‡æª”

## æ¦‚è¿°

æœ¬æ–‡æª”å®šç¾©è£œç¿’ç­ç®¡ç†ç³»çµ±ä¸­çš„ API è¦æ ¼æ¨™æº–ï¼ŒåŒ…å«è³‡æ–™æ ¼å¼ã€æ¬„ä½å®šç¾©å’Œé©—è­‰è¦å‰‡ã€‚

---

## èª²ç¨‹æ¨¡çµ„ API

### èª²ç¨‹æ’ç¨‹æ¨¡å¼æ ¼å¼ (schedule_pattern)

èª²ç¨‹è¡¨ä¸­çš„ `schedule_pattern` æ¬„ä½æ¡ç”¨ JSON æ ¼å¼å­˜å„²ï¼Œç”¨æ–¼å®šç¾©èª²ç¨‹çš„é€±æœŸæ€§ä¸Šèª²å®‰æ’ã€‚

#### æ¨™æº– JSON æ ¼å¼

```json
{
  "type": "weekly",
  "days": [1, 3, 5],
  "start_time": "19:00",
  "end_time": "20:30",
  "duration": 90,
  "classroom": "Aæ•™å®¤",
  "effective_date": "2025-07-21",
  "end_date": null
}
```

#### æ¬„ä½èªªæ˜

| æ¬„ä½ | é¡å‹ | å¿…å¡« | èªªæ˜ | ç¯„ä¾‹å€¼ |
|------|------|------|------|--------|
| `type` | string | âœ… | æ’ç¨‹é¡å‹ | `"weekly"`, `"monthly"`, `"intensive"` |
| `days` | number[] | âœ… | æ˜ŸæœŸå¹¾ä¸Šèª² (1=ä¸€, 2=äºŒ...7=æ—¥) | `[1, 3, 5]` |
| `start_time` | string | âœ… | é–‹å§‹æ™‚é–“ (HH:mm æ ¼å¼) | `"19:00"` |
| `end_time` | string | âœ… | çµæŸæ™‚é–“ (HH:mm æ ¼å¼) | `"20:30"` |
| `duration` | number | âœ… | èª²ç¨‹é•·åº¦ (åˆ†é˜) | `90` |
| `classroom` | string | âŒ | é è¨­æ•™å®¤ | `"Aæ•™å®¤"` |
| `effective_date` | string | âœ… | ç”Ÿæ•ˆæ—¥æœŸ (YYYY-MM-DD) | `"2025-07-21"` |
| `end_date` | string | âŒ | çµæŸæ—¥æœŸ (YYYY-MM-DD, null=æ°¸ä¹…) | `"2025-12-31"` æˆ– `null` |

#### æ’ç¨‹é¡å‹èªªæ˜

- **weekly**: æ¯é€±å›ºå®šæ™‚é–“ä¸Šèª²
- **monthly**: æ¯æœˆå›ºå®šæ™‚é–“ä¸Šèª²  
- **intensive**: å¯†é›†ç­èª²ç¨‹
- **irregular**: ä¸å®šæœŸèª²ç¨‹

#### æ˜ŸæœŸå¹¾ç·¨ç¢¼è¦å‰‡

| æ•¸å­— | æ˜ŸæœŸ |
|------|------|
| 1 | æ˜ŸæœŸä¸€ |
| 2 | æ˜ŸæœŸäºŒ |
| 3 | æ˜ŸæœŸä¸‰ |
| 4 | æ˜ŸæœŸå›› |
| 5 | æ˜ŸæœŸäº” |
| 6 | æ˜ŸæœŸå…­ |
| 7 | æ˜ŸæœŸæ—¥ |

#### ç¯„ä¾‹å ´æ™¯

**å ´æ™¯ 1: ä¸€èˆ¬é€±èª²ç¨‹**
```json
{
  "type": "weekly",
  "days": [1, 3],
  "start_time": "19:00",
  "end_time": "20:30",
  "duration": 90,
  "classroom": "Aæ•™å®¤",
  "effective_date": "2025-07-21",
  "end_date": null
}
```

**å ´æ™¯ 2: é€±æœ«å¯†é›†ç­**
```json
{
  "type": "intensive",
  "days": [6],
  "start_time": "09:00", 
  "end_time": "12:00",
  "duration": 180,
  "classroom": "Bæ•™å®¤",
  "effective_date": "2025-07-26",
  "end_date": "2025-08-30"
}
```

**å ´æ™¯ 3: ä¸€é€±ä¸‰å¤©èª²ç¨‹**
```json
{
  "type": "weekly",
  "days": [1, 3, 5],
  "start_time": "18:00",
  "end_time": "19:30", 
  "duration": 90,
  "classroom": "Cæ•™å®¤",
  "effective_date": "2025-07-21",
  "end_date": null
}
```

#### é©—è­‰è¦å‰‡

1. **æ™‚é–“æ ¼å¼**: `start_time` å’Œ `end_time` å¿…é ˆç‚º `HH:mm` æ ¼å¼
2. **æ™‚é–“é‚è¼¯**: `end_time` å¿…é ˆå¤§æ–¼ `start_time`
3. **duration è¨ˆç®—**: æ‡‰èˆ‡ `start_time` åˆ° `end_time` çš„æ™‚é–“å·®ä¸€è‡´
4. **days ç¯„åœ**: é™£åˆ—å…ƒç´ å¿…é ˆåœ¨ 1-7 ä¹‹é–“
5. **æ—¥æœŸæ ¼å¼**: æ—¥æœŸå¿…é ˆç‚º `YYYY-MM-DD` æ ¼å¼
6. **æ—¥æœŸé‚è¼¯**: `end_date` å¦‚æœä¸ç‚º `null`ï¼Œå¿…é ˆå¤§æ–¼ç­‰æ–¼ `effective_date`

#### è½‰æ›é‚è¼¯

å¾ `schedule_pattern` ç”Ÿæˆå¯¦éš›èª²ç¨‹å®‰æ’æ™‚ï¼š

1. è®€å– `days` é™£åˆ—ï¼Œæ‰¾å‡ºæ‰€æœ‰ä¸Šèª²çš„æ˜ŸæœŸå¹¾
2. å¾ `effective_date` é–‹å§‹ï¼Œè¨ˆç®—æ¯é€±å°æ‡‰çš„æ—¥æœŸ
3. çµåˆ `start_time` å’Œ `end_time` ç”Ÿæˆå®Œæ•´çš„ `class_datetime` å’Œ `end_datetime`
4. é‡è¤‡ç›´åˆ° `end_date` (å¦‚æœæœ‰è¨­å®š) æˆ–æŒ‡å®šçš„èª²ç¨‹å ‚æ•¸

---

## æ›´æ–°è¨˜éŒ„

| ç‰ˆæœ¬ | æ—¥æœŸ | è®Šæ›´èªªæ˜ |
|------|------|----------|
| 1.0.0 | 2025-07-20 | åˆå§‹ç‰ˆæœ¬ï¼Œå®šç¾©èª²ç¨‹æ’ç¨‹æ¨¡å¼æ¨™æº–æ ¼å¼ |

---

*ğŸ“… æ–‡æª”ç”Ÿæˆæ™‚é–“: 2025-07-20*  
*ğŸ”„ æœ€å¾Œæ›´æ–°: èª²ç¨‹æ’ç¨‹æ¨¡å¼ API è¦æ ¼å®Œæˆ*