<template>
  <div class="simple-contact-form rounded-lg border border-gray-200 p-6">
    <!-- å§“å -->
    <div class="mb-4">
      <label class="mb-2 block text-sm font-medium text-gray-700">
        å§“å <span class="text-red-500">*</span>
      </label>
      <input
        name="full_name"
        type="text"
        :value="contact.full_name"
        :readonly="readonly"
        @input="updateField('full_name', ($event.target as HTMLInputElement).value)"
        class="mt-1 block w-full rounded-md border border-gray-300 px-4 py-2 shadow-sm transition-colors focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:text-sm"
        placeholder="è«‹è¼¸å…¥è¯çµ¡äººå§“å"
      />
    </div>

    <!-- é›»è©± -->
    <div class="mb-4">
      <label class="mb-2 block text-sm font-medium text-gray-700">
        é›»è©± <span class="text-red-500">*</span>
      </label>
      <input
        name="phone"
        type="tel"
        :value="contact.phone"
        :readonly="readonly"
        @input="updateField('phone', ($event.target as HTMLInputElement).value)"
        class="mt-1 block w-full rounded-md border border-gray-300 px-4 py-2 shadow-sm transition-colors focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:text-sm"
        placeholder="è«‹è¼¸å…¥é›»è©±è™Ÿç¢¼"
      />
    </div>

    <!-- é—œä¿‚ -->
    <div class="mb-4">
      <label class="mb-2 block text-sm font-medium text-gray-700">é—œä¿‚</label>
      <select
        name="relationship"
        :value="contact.relationship"
        :disabled="readonly"
        @change="updateField('relationship', ($event.target as HTMLSelectElement).value)"
        class="mt-1 block w-full rounded-md border border-gray-300 bg-white px-4 py-2 shadow-sm transition-colors focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:text-sm"
      >
        <option value="çˆ¶è¦ª">ğŸ‘¨ çˆ¶è¦ª</option>
        <option value="æ¯è¦ª">ğŸ‘© æ¯è¦ª</option>
        <option value="ç›£è­·äºº">ğŸ‘¤ ç›£è­·äºº</option>
        <option value="æœ¬äºº">ğŸ§‘â€ğŸ“ æœ¬äºº</option>
      </select>
    </div>

    <!-- é›»å­éƒµä»¶ -->
    <div class="mb-4">
      <label class="mb-2 block text-sm font-medium text-gray-700">é›»å­éƒµä»¶</label>
      <input
        name="email"
        type="email"
        :value="contact.email"
        :readonly="readonly"
        @input="updateField('email', ($event.target as HTMLInputElement).value)"
        class="mt-1 block w-full rounded-md border border-gray-300 px-4 py-2 shadow-sm transition-colors focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:text-sm"
        placeholder="è«‹è¼¸å…¥é›»å­éƒµä»¶"
      />
    </div>

    <!-- åœ°å€ -->
    <div class="mb-4">
      <label class="mb-2 block text-sm font-medium text-gray-700">åœ°å€</label>
      <input
        name="address"
        type="text"
        :value="contact.address"
        :readonly="readonly"
        @input="updateField('address', ($event.target as HTMLInputElement).value)"
        class="mt-1 block w-full rounded-md border border-gray-300 px-4 py-2 shadow-sm transition-colors focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:text-sm"
        placeholder="è«‹è¼¸å…¥åœ°å€"
      />
    </div>

    <!-- å‚™è¨» -->
    <div class="mb-6">
      <label class="mb-2 block text-sm font-medium text-gray-700">å‚™è¨»</label>
      <textarea
        name="notes"
        rows="3"
        :value="contact.notes"
        :readonly="readonly"
        @input="updateField('notes', ($event.target as HTMLTextAreaElement).value)"
        class="mt-1 block w-full resize-none rounded-md border border-gray-300 px-4 py-2 shadow-sm transition-colors focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:text-sm"
        placeholder="è«‹è¼¸å…¥å‚™è¨»è³‡è¨Š..."
      />
    </div>

    <!-- è¯çµ¡äººé¡å‹ -->
    <div class="space-y-3">
      <label class="block text-sm font-medium text-gray-700">è¯çµ¡äººé¡å‹</label>
      <div class="flex flex-wrap gap-4">
        <label class="flex items-center">
          <input
            name="is_primary"
            type="checkbox"
            :checked="contact.is_primary"
            :disabled="readonly"
            @change="updateField('is_primary', ($event.target as HTMLInputElement).checked)"
            class="size-4 rounded border-gray-300 text-blue-600 transition-colors focus:ring-blue-500"
          />
          <span class="ml-2 text-sm text-gray-700">â­ ä¸»è¦è¯çµ¡äºº</span>
        </label>
        <label class="flex items-center">
          <input
            name="is_emergency"
            type="checkbox"
            :checked="contact.is_emergency"
            :disabled="readonly"
            @change="updateField('is_emergency', ($event.target as HTMLInputElement).checked)"
            class="size-4 rounded border-gray-300 text-red-600 transition-colors focus:ring-red-500"
          />
          <span class="ml-2 text-sm text-gray-700">ğŸš¨ ç·Šæ€¥è¯çµ¡äºº</span>
        </label>
        <label class="flex items-center">
          <input
            name="is_billing"
            type="checkbox"
            :checked="contact.is_billing"
            :disabled="readonly"
            @change="updateField('is_billing', ($event.target as HTMLInputElement).checked)"
            class="size-4 rounded border-gray-300 text-green-600 transition-colors focus:ring-green-500"
          />
          <span class="ml-2 text-sm text-gray-700">ğŸ’³ å¸³å‹™è¯çµ¡äºº</span>
        </label>
      </div>
    </div>

    <!-- ç§»é™¤æŒ‰éˆ• -->
    <div v-if="showRemoveButton && !readonly" class="mt-6 border-t border-gray-200 pt-4">
      <button
        type="button"
        @click="$emit('remove')"
        class="inline-flex items-center rounded-md border border-red-300 bg-white px-3 py-2 text-sm font-medium text-red-700 hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"
      >
        ç§»é™¤æ­¤è¯çµ¡äºº
      </button>
    </div>
  </div>
</template>

<script setup lang="ts">
import type { ContactFormData } from './types'

interface Props {
  contact: ContactFormData
  readonly?: boolean
  showRemoveButton?: boolean
}

interface Emits {
  (e: 'update:contact', contact: ContactFormData): void
  (e: 'remove'): void
}

const props = withDefaults(defineProps<Props>(), {
  readonly: false,
  showRemoveButton: false
})

const emit = defineEmits<Emits>()

function updateField(field: keyof ContactFormData, value: any) {
  if (props.readonly) return

  const updatedContact = { ...props.contact, [field]: value }
  emit('update:contact', updatedContact)
}
</script>
